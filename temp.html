<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pretty-print-json@1.2/dist/pretty-print-json.css>
<script src=https://cdn.jsdelivr.net/npm/pretty-print-json@1.2/dist/pretty-print-json.min.js></script>
<pre id=json-showbox class=json-container></pre>
<script>
    const params = new URLSearchParams(window.location.search);

    const device = null;
    const field = null;
    const type = null;
    const case_no = null;


    for (let f in ['device', 'field', 'type']) {
        if (!(params.has(f)))
            alert("need search parameters ['device', 'field', 'type', 'case_no']");
    }


    const redirect_params = ['https://jihuneu.github.io', params.get('device'), params.get('field'), params.get('type')];
    if ('case_no' in params) {
        redirect_params.push('sample'+params.get('case_no')+".json");
    } else {
        redirect_params.push('sample.json')
    }
    const redirect_url = redirect_params.join('/')


    fetch(redirect_url)
        .then(response => response.json())
        .then(data => 
            document.getElementById('json-showbox').innerHTML = prettyPrintJson.toHtml(data)
            );
    // const data = { active: true, mode: 'ðŸšƒ', codes: [48348, 28923, 39080], city: 'London' };
    
</script>

<!-- URLSearchParameter.to_string() -->